<?php

ini_set('memory_limit', '1280M');

class Wyomind_Googleshopping_Model_Googleshopping extends Mage_Core_Model_Abstract {
    /* If you don't use short url add index.php to the variable */

    public $_indexPhp = '';

    /* System */
    protected $_filePath;
    public $_limit = false;
    public $_display = false;
    public $_rates = false;
    public $_sqlSize = 1500;

    /* This function evaluate all php scripts */

    public function execPhpScript($myPattern, $product, $xml=true) {

        $myPattern = str_replace('<?', utf8_encode('¤'), $myPattern);
        $myPattern = str_replace('?>', utf8_encode('¤'), $myPattern);
        $pattern = utf8_encode('/(¤(.[^¤]+)¤)/s');
        preg_match_all($pattern, $myPattern, $matches);
        if (isset($matches[1])) {

            foreach ($matches[1] as $key => $script) {

                if ($xml == 1) {
                    if (@eval($matches[2][$key] . ';'))
                        $myPattern = str_replace($script, eval($matches[2][$key] . ';'), $myPattern);
                    else
                        $myPattern = str_replace($script, '', $myPattern);
                }
                else {
                    if (@eval($this->unescapeStr($matches[2][$key] . ';')))
                        $myPattern = str_replace($script, $this->escapeStr(eval($this->unescapeStr($matches[2][$key]) . ';')), $myPattern);
                    else
                        $myPattern = str_replace($script, '', $myPattern);
                }
            }
        }

        return $myPattern;
    }

    

 
protected function _construct() {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; $this->_init('googleshopping/googleshopping');}protected function _beforeSave() {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; $x0b = new Varien_Io_File();$x0c = $x0b->getCleanPath(Mage::getBaseDir() . '/' . $this->getGoogleshoppingPath());if (!$x0b->allowedPath($x0c, Mage::getBaseDir())) { }if (!$x0b->fileExists($x0c, false)) {Mage::throwException(Mage::helper('googleshopping')->__('Please create the specified folder "%s" before saving the googleshopping.', Mage::helper('core')->htmlEscape($this->getGoogleshoppingPath())));}if (!$x0b->isWriteable($x0c)) {Mage::throwException(Mage::helper('googleshopping')->__('Please make sure that "%s" is writable by web-server.', $this->getGoogleshoppingPath()));}if (!$xb6('#^[a-zA-Z0-9_\.]+$#', $this->getGoogleshoppingFilename())) {Mage::throwException(Mage::helper('googleshopping')->__('Please use only letters (a-z or A-Z), numbers (0-9) or underscore (_) in the filename. No spaces or other characters are allowed.'));}if (!$xb6('#\.xml$#', $this->getGoogleshoppingFilename())) {$this->setGoogleshoppingFilename($this->getGoogleshoppingFilename() . '.xml');}$this->setGoogleshoppingPath($xbc($xbf($xbf('\\', '/', Mage::getBaseDir()), '', $x0c), '/') . '/');return parent::_beforeSave();}protected function getPath() {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; if ($xb1($this->_filePath)) {$this->_filePath = $xbf('//', '/', Mage::getBaseDir() .$this->getGoogleshoppingPath());}return $this->_filePath;}public function getPreparedFilename() {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; return $this->getPath() . $this->getGoogleshoppingFilename();}public function applyCurrencyRate($x0d, $x0e) {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; $x0f = $this->_currencies;if (isset($x0f[$x0e]))return $x0d * $x0f[$x0e];else {return $x0d;}}public function applyTax($x0d, $x10, $x11, $x12=false) {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; $x13 = $this->_rates; if ($x12 === false) {if (!$x10 && isset($x13[$x11])) {if ($xa5($x13[$x11]) > 1) {return $x0d;} else {return $x0d * ($x13[$x11][0]['rate'] / 100 + 1);}} else {return $x0d;}} elseif ($x12 === "\060") { if ($x10 && isset($x13[$x11])) {if ($xa5($x13[$x11]) > 1) {return $x0d;} else {return 100 * $x0d / (100 + ($x13[$x11][0]['rate']));}} else {return $x0d;}} else { if ($xb2($x12)) {if ($x11 != 0) {return $x0d * ($x12 / 100 + 1);} elseif ($x11 == 0) {return $x0d;}} else {$x12 = $xa8('/', $x12);$x14 = 0;$x15 = false;if ($xc2($x12[0], 0, 1) == "-") {$x12[0] = $xc2($x12[0], 1);$x15 = true;}if ($x13[$x11]) {foreach ($x13[$x11] as $x16) {if ($x16['country'] == $x12[0]) {if (!isset($x12[1]) || $x16['code'] == $x12[1]) {$x14 = $x16['rate'];break;}}}if (!$x15)return $x0d * ($x14 / 100 + 1);else {return 100 * $x0d / (100 + ($x14));}} else {return $x0d;}}}}public function xmlEncloseData($x17, $x18=true) {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; $x19 = '/(<[^>^\/]+>)([^<]*)(<\/[^>]+>)/s';$xb7($x19, $x17, $x1a);foreach ($x1a[1] as $x1b => $x1c) {$x1d = $xc4($x1a[2][$x1b]);if (empty($x1d) && !$xb2($x1d))$x17 = $xbf($x1a[0][$x1b], '', $x17);else {if ($x18)$x17 = $xbf($x1a[0][$x1b], ($x1a[1][$x1b]) . '<![CDATA[' . $x1d . ']]>' . ($x1a[3][$x1b]), $x17);else$x17 = $xbf($x1a[0][$x1b], ($x1a[1][$x1b]) . $x1d . ($x1a[3][$x1b]), $x17);}}$x1e = $xb8("/\n/\x73", $x17);$x1f = '';foreach ($x1e as $x20) {($xc0($xc4($x20)) > 0) ? $x1f.=$x20 . "\n" : false;}$x17 = $x1f;return $x17;}public function encode($x17) {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; if ($this->_display)return ($x17);else {if ($this->_chartset == 'ISO')return $xc6($x17);else {return ($x17);}}}public function checkReference($x21, $x22) {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; if (($x21 == "p\x61r\145\x6e\164" || $x21 == "c\x6fnfi\x67u\162\141\142l\x65") && isset($this->configurable[$x22->getId()]))return $this->configurable[$x22->getId()];elseif (($x21 == "\x70\x61re\156t" || $x21 == "\147\x72o\x75\160e\x64") && isset($this->grouped[$x22->getId()]))return $this->grouped[$x22->getId()];elseif (($x21 == "\160\141\x72\145nt" || $x21 == "\142\x75\156\144\154\145") && isset($this->bundle[$x22->getId()]))return $this->bundle[$x22->getId()];else {return $x22;}}public function generateXml() {  $xa4="\x61\162\162\x61\171\x5fp\x75\x73h"; $xa5="\143ou\156\x74"; $xa6="\144a\x74e"; $xa7="e\166\x61l"; $xa8="exp\x6co\x64e"; $xa9="\x68\145\x61\144\x65r"; $xaa="ht\155\x6c\163p\x65\143i\x61\x6c\x63h\141\162\x73"; $xab="h\x74\155\x6c\x5f\145n\164\151\x74y\x5f\x64e\143\157\144\x65"; $xac="\x68tml\145\156t\151\x74\x69\145\x73"; $xad="\151\x6e_\x61\x72\x72\141y"; $xae="im\160l\157\144\x65"; $xaf="\151n\x69\137\147\145\164"; $xb0="\151s\137\x61r\162\141y"; $xb1="\151\163\x5fnul\154"; $xb2="is\137\156\165me\162\151\143"; $xb3="\x6d\x62_\x73tr\x74\x6f\154ow\x65r"; $xb4="\x6d\x62\137\163\x74r\x74\157\x75\160p\145\x72"; $xb5="numbe\x72_fo\x72\155a\x74"; $xb6="p\162\x65\x67_\155\141\x74ch"; $xb7="\x70\x72\x65\147\x5f\155atc\x68\x5fa\x6c\x6c"; $xb8="\160\162eg\x5f\163p\x6c\151t"; $xb9="pri\x6e\164\137r"; $xba="p\162\145\x67\137\162\145p\x6cace"; $xbb="r\157un\144"; $xbc="\162\164\162\x69\x6d"; $xbd="\x73e\x74\137\x74\151\x6de\x5f\154\x69mit"; $xbe="sp\162int\146"; $xbf="\163\164r\137\162\x65\x70\154a\x63\x65"; $xc0="\x73\x74\x72\x6c\x65\x6e"; $xc1="\163\x74\x72\x69p\137\164\x61g\x73"; $xc2="\163\165\x62\163t\x72"; $xc3="s\164\162r\x70\157s"; $xc4="t\x72\151\x6d"; $xc5="\x75\143w\x6frds"; $xc6="\165t\146\x38\x5f\144\x65c\157d\x65"; $this->_debug = (isset($_GET['debug'])) ? true : false;$x23 = $this->_indexPhp;$x0b = new Varien_Io_File();$x0b->setAllowCreateFolders(true);if (!$this->_display) {$x0b->open(array('path' => $this->getPath()));if ($x0b->fileExists($this->getGoogleshoppingFilename()) && !$x0b->isWriteable($this->getGoogleshoppingFilename())) {Mage::throwException(Mage::helper('googleshopping')->__('File "%s" cannot be saved. Please, make sure the directory "%s" is writeable by web server.', $this->getGoogleshoppingFilename(), $this->getPath()));}$x0b->streamOpen($this->getGoogleshoppingFilename());}$x24 = array("\x61\143" => "a\x63\x74iv\x61\164\x69\157\156\x5fcod\x65", "\141k" => "\141ct\x69va\x74\x69\157n_k\145\x79", "\142\165" => "\142\141\x73\x65\137\165\x72\x6c", "\155\144" => "\x6d\144\065", "t\x68" => "\x74\150\151s", "d\x6d" => "\137\144em\x6f", "e\x78t" => "\x73\147s", "\x76\x65\162" => "\x35\0564\056\060");$x25 = $this->getStoreId();$x26 = Mage::getSingleton('core/date')->gmtDate('Y-m-d');$x27 = Mage::getDesign()->getSkinUrl();$x28 = Mage::getStoreConfig("\143\141\164\x61\154\157g\057p\x6c\141c\145\150\x6fl\144\145r\x2fim\x61\x67\x65\137\160\154a\x63\x65\x68o\154d\x65\x72", $x25);$x29 = Mage::getStoreConfig("\143\165\x72r\x65\x6e\x63\x79\057\157pt\151o\x6e\x73\057\x62as\145", $x25);$x2a = Mage::app()->getStore($x25)->getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB, false);$x2b = Mage::app()->getStore($x25)->getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA, false);$x2c = Mage::getStoreConfig(Mage_Tax_Model_Config::CONFIG_XML_PATH_PRICE_INCLUDES_TAX, $x25);$x2d = Mage::app()->getStore($x25)->getRootCategoryId();$x2e = array("\141\143\x74i\166\x61t\151o\x6e\137\x6b\145\x79" => Mage::getStoreConfig("g\157\157\x67\154e\x73\x68\x6f\160\160\151\x6e\x67\x2fl\x69cens\x65/ac\x74\x69\166\x61t\x69on\x5f\153e\171"),"\141c\164i\166\141\x74\x69\x6f\x6e_\143\x6f\144\145" => Mage::getStoreConfig("\147\x6f\x6fg\154e\x73h\157p\x70\151\x6e\147\x2fli\x63e\156\x73e\057a\143\164i\166\141t\x69\x6fn_\143o\144\145"),"b\x61\x73\x65\137u\162l" => Mage::getStoreConfig("\x77\x65\142\x2fs\x65\143\165\x72e\057\142\x61\163e_\165\162\154"),);$x2f = $this->getGoogleshoppingXmlitempattern();$x30 = $this->getGoogleshoppingTitle();$x31 = $this->getGoogleshoppingDescription();$x32 = json_decode($this->getGoogleshoppingCategories());$x33 = Array();$x34 = Array();if ($this->getGoogleshoppingCategories() != '*') {foreach ($x32 as $x35) {if ($x35->checked)$x33[] = $x35->line;}foreach ($x32 as $x35) {if ($x35->mapping != "")$x34[$x35->line] = $x35->mapping;}}if ($xa5($x33) < 1) {$x33[] = '*';}$x36 = $xa8(',', $this->getGoogleshoppingTypeIds());$x37 = $xa8(',', $this->getGoogleshoppingVisibility());$x38 = json_decode($this->getGoogleshoppingAttributes());if ($x2e[$x24['ac']] != $x24["\155d"]($x24["md"]($x2e[$x24['ak']]) . $x24["m\144"]($x2e[$x24['bu']]) . $x24["\x6d\144"]($x24["\x65\x78\x74"]) . $x24["\x6dd"]($x24["\x76\x65\x72"]))) {$$x24["e\x78t"] = "val\151\144";$$x24["\164\150"]->$x24["dm"] = true;} else {$$x24["t\150"]->$x24["d\155"] = false;$$x24["\x65xt"] = "va\154\151\144";}$x39 = '';$x3a = '';$xa9("\x43o\x6e\x74ent\x2d\x54\171\x70e\x3a \164\x65x\x74\057\x68tm\154\x3b \x63\150\141\162set\x3d\165t\x66\0558");$x39 = ('<?xml version="1.0" encoding="utf-8" ?>' . "\n");$x39.=('<rss version="2.0" xmlns:g="http://base.google.com/ns/1.0">' . "\n");$x39.=('<channel>' . "\n");$x39.=('<title>' . $x30 . "<\x2f\164\x69\164\154\x65\x3e\n");$x39.=('<link>' . $xc2($x2a, 0, -1) . "\074\057\154\151n\153\076\n");$x39.=('<description>' . $x31 . "\x3c\057\x64\145\163\143\162\151\160t\151\157n\x3e\n");if (!isset($$x24["\145xt"]) || $$x24["\x74\x68"]->$x24["\x64m"]) {$$x24["\164\150"]->$x24["dm"] = true;return $$x24["th"];}if ($this->_display)$x3a = $this->encode($x39);else {$x0b->streamWrite($this->encode($x39));}$x19 = '/{([a-zA-Z_0-9:]+)(\sparent|\sgrouped|\sconfigurable|\sbundle)?([^}]*)}/';$xb7($x19, $x2f, $x1a);$x3b = array();$x3c = array();foreach ($x1a[1] as $x1b => $x3d) {$x3b[$x1b]['methodName'] = "\147\x65t" . $xbf(' ', '', $xc5($xc4($x3d)) . '()');$x3b[$x1b]['pattern'] = "\x7b" . $xc4($x3d) . "\175";$x3b[$x1b]['fullpattern'] = $x1a[0][$x1b];$x3b[$x1b]['name'] = $xc4($x3d);$x3b[$x1b]['reference'] = $xc4($x1a[2][$x1b]);if (empty($x3b[$x1b]['reference']))$x3b[$x1b]['reference'] = 'self';switch ($x3b[$x1b]['name']) {case 'G:IMAGE_LINK':$xa4($x3c, 'image');$xa4($x3c, 'small_image');$xa4($x3c, 'thumbnail');break;default : $xa4($x3c, $x3b[$x1b]['name']);}$x3b[$x1b]["\166\141\154ue"] = '$x22->get' . $x3b[$x1b]['name'] . "\050\x29";$x3b[$x1b]["\x67\145\x74\x54\145\x78t"] = 'getAttributeText(\'' . $xc4($x3d) . '\')';$x3e = '/\[([^\]]+)\]/';$xb7($x3e, $x1a[3][$x1b], $x3f);$x3b[$x1b]["\x6fpt\151o\156\x73"] = $x3f[1];}if ($this->_debug) {echo "-\x2d\055\055\055-\055\055\x2d\055-\x2d\055\055-\055--\x2d\x2d-\055--\055-\x2d\055\055\x2d\055-\x2d\055--\x2d\x2d\055\x2d\055\x2d\x2d-\055\x2d\x3c\x62\162\076
\012\040\x20\x20\x20 \x20  \x20   \040\x20\040\040\040\040\x20\055-\x2d\x2d-\x2d\055-\x2d\x2d\x2d\055 \x44E\x42U\107 \115\117D\x45\x20-\x2d--\055\055\x2d-\x2d-\055\x2d\055\055\055\x2d\074b\x72>\x0d\012\040\x20\040\040\040\040\x20\x20 \040    \040\x20\040 \040\x2d\x2d\055-\x2d-\x2d-\055\x2d\x2d-\x2d\x2d---\055---\x2d--\055\055\055-\x2d\055\x2d\x2d\x2d\x2d-\x2d\x2d\055-\x2d\055\x2d---\055<\x62\x72\076<\x62\x72>";echo "\x3c\142r>\074\x62r\076\055\x2d-\x2d-\x2d\055\x2d\x2d--\055\040\101\124\124\x52IBU\x54E\123\040\x2d\055\055\x2d\055\x2d\x2d\055-\055-----\055\x3c\142\162\x3e";$xb9($x3b);}$x40 = Mage::getModel('catalog/category')->getCollection()->setStoreId($x25)->addAttributeToSelect('name', 'store_id')->addAttributeToSelect('is_active');$x41 = array();foreach ($x40 as $x42) {$x41[$x42->getId()]['name'] = $x42->getName();$x41[$x42->getId()]['path'] = $x42->getPath();$x41[$x42->getId()]['level'] = $x42->getLevel();}if ($this->_debug) {echo "<\x62r\076\x3cb\x72>\055-\055-\x2d\055--\055-\055\x2d\040\103\101\x54\x45G\117\x52\111\105\x53\x20---\055\x2d\055\x2d\055-\x2d-\055\055\x2d\x2d\x2d<\142\162>";$xb9($x41);}$x43 = Mage::getSingleton('core/resource');$x44 = $x43->getConnection('core_read');$x45 = $x43->getTableName('eav_entity_type');$x46 = $x44->select()->from($x45)->where('entity_type_code=\'catalog_product\'');$x47 = $x44->fetchAll($x46);$x48 = $x47[0]['entity_type_id'];$x43 = Mage::getSingleton('core/resource');$x44 = $x43->getConnection('core_read');$x49 = $x43->getTableName('directory_currency_rate');$x46 = $x44->select()->from($x49)->where('currency_from=\'' . $x29 . '\'');$x0f = $x44->fetchAll($x46);$x4a = array();foreach ($x0f as $x0e) {$x4a[$x0e['currency_to']] = $x0e['rate'];}$this->_currencies = $x4a;if ($this->_debug) {echo "\074\142\162>\074\142r\076\055----\055\055\x2d--\x2d\x2d\040\103URREN\103\x49\x45\123\x20-\x2d--\x2d\055\055---\055--\055--\x3c\x62r\076";$xb9($x4a);}$x4b = Mage::getResourceModel('eav/entity_attribute_collection')->setEntityTypeFilter($x48)->addSetInfo()->getData();$x4c = array();$x4d = array();foreach ($x4b as $x1b => $x3d) {if ($xad($x3d['attribute_code'], $x3c)) {$xa4($x4c, $x3d['attribute_code']);$x4d[$x3d['attribute_code']] = $x3d['frontend_input'];}}if (!$xad('special_price', $x4c))$x4c[] = 'special_price';if (!$xad('special_from_date', $x4c))$x4c[] = 'special_from_date';if (!$xad('special_to_date', $x4c))$x4c[] = 'special_to_date';if (!$xad('price_type', $x4c))$x4c[] = 'price_type';if (!$xad('price', $x4c))$x4c[] = 'price';$x4c[] = 'tax_class_id';foreach ($x38 as $x4e) {if (!$xad($x4e->code, $x4c) && $x4e->checked)$x4c[] = $x4e->code;}if ($this->_debug) {echo "\x3c\x62\x72\x3e<\142\162\x3e\055--\055\x2d\x2d\055\055\x2d-\055\055\x20\101T\x54\122\x49B\125\124E\x53 \055-\x2d\055\055-\055---\055\055\x2d\055\x2d\055\074\x62\x72\076";$xb9($x4c);}$x43 = Mage::getSingleton('core/resource');$x44 = $x43->getConnection('core_read');$x4f = $x43->getTableName('eav_attribute_option_value');$x46 = $x44->select();$x46->from($x4f);$x46->where("s\x74\x6fr\x65\x5f\x69\x64\x3d" . $x25 . ' OR  store_id=0');$x46->order(array('option_id', 'store_id'));$x50 = $x44->fetchAll($x46);foreach ($x50 as $x51) {$x52[$x51['option_id']][$x51['store_id']] = $x51['value'];}if ($this->_debug) {echo "\x3c\142\x72><\x62\x72\x3e\055\055\x2d\055\x2d---\055---\040\101\124TRI\x42\125TE\x53\040\114A\102EL\x20\x2d\x2d\x2d-\055--\055-\055\x2d\055\x2d\055-\x2d\074\142r>";$xb9($x52);}$x53 = $x43->getTableName('tax_class');$x54 = $x43->getTableName('tax_calculation');$x55 = $x43->getTableName('tax_calculation_rate');$x56 = $x43->getTableName('directory_country_region');$x46 = $x44->select();$x46->from($x53)->order(array('class_id', 'tax_calculation_rate_id'));$x46->joinleft(array('tc' => $x54), 'tc.product_tax_class_id = ' . $x53 . '.class_id', 'tc.tax_calculation_rate_id');$x46->joinleft(array('tcr' => $x55), 'tcr.tax_calculation_rate_id = tc.tax_calculation_rate_id', array('tcr.rate', 'tax_country_id', 'tax_region_id'));$x46->joinleft(array('dcr' => $x56), 'dcr.region_id=tcr.tax_region_id', 'code');$x57 = $x44->fetchAll($x46);$x13 = array();$x58 = '';foreach ($x57 as $x59) {if ($x58 != $x59['class_id'])$x5a = 0;else {$x5a++;}$x58 = $x59['class_id'];$x13[$x59['class_id']][$x5a]['rate'] = $x59['rate'];$x13[$x59['class_id']][$x5a]['code'] = $x59['code'];$x13[$x59['class_id']][$x5a]['country'] = $x59['tax_country_id'];}$this->_rates = $x13;if ($this->_debug) {echo "\x3cb\x72>\x3c\x62\162>\055-\x2d\x2d\x2d\055\055\x2d-\055\x2d\x2d \124\101\130 C\114\101\x53S \x2d\055-\x2d\055-\x2d\055-\x2d\x2d--\x2d\055\055\x3c\142\x72\076";$xb9($x13);}$x5b = $x43->getTableName('review');$x5c = $x43->getTableName('review_store');$x5d = $x43->getTableName('rating_option_vote');$x5e = $x44->select()->distinct('review_id');$x5e->from(array("r" => $x5b), array("\x43\117U\x4e\x54(\x44IS\x54IN\x43\124 \x72\056r\x65\166\151e\167\x5fi\144)\040\x41S\040cou\x6e\164", 'entity_pk_value'));$x5e->joinleft(array('rs' => $x5c), 'rs.review_id=r.review_id', 'rs.store_id');$x5e->joinleft(array('rov' => $x5d), 'rov.review_id=r.review_id', 'AVG(rov.percent) AS score');$x5e->where("\x73t\x61\x74u\163\137\x69\144\075\061 \141nd\x20\145n\164\x69t\171_\151d\0751");$x5e->group(array('r.entity_pk_value', 'rs.store_id'));$x5f = $x44->select();$x5f->from(array("\162" => $x5b), array("\x43\x4f\125N\124(\104\111S\124I\x4e\103T \162.r\145\166i\x65w\137i\144) \101\123\x20\x63\x6fu\x6e\x74", 'entity_pk_value', "\050\123E\x4cE\x43\124 \x30\x29\040\x41\123\x20 s\x74\x6f\162\145\x5f\x69\x64"));$x5f->joinleft(array('rs' => $x5c), 'rs.review_id=r.review_id', array());$x5f->joinleft(array('rov' => $x5d), 'rov.review_id=r.review_id', 'AVG(rov.percent) AS score');$x5f->where("\x73\x74a\x74\165\163_\151d=\061 \x61\x6e\x64\x20\145n\x74i\x74y_id=\x31");$x5f->group(array('r.entity_pk_value'));$x46 = $x44->select()->union(array($x5e, $x5f));$x46->order(array('entity_pk_value', 'store_id'));$x60 = $x44->fetchAll($x46);$x61 = array();foreach ($x60 as $x62) {$x61[$x62['entity_pk_value']][$x62['store_id']]['count'] = $x62['count'];$x61[$x62['entity_pk_value']][$x62['store_id']]['score'] = $x62['score'];}$x43 = Mage::getSingleton('core/resource');$x44 = $x43->getConnection('core_read');$x63 = $x43->getTableName('catalog_product_entity_media_gallery');$x64 = $x43->getTableName('catalog_product_entity_media_gallery_value');$x46 = $x44->select();$x46->from($x63);$x46->joinleft(array('cpemgv' => $x64), 'cpemgv.value_id = ' . $x63 . '.value_id', array('cpemgv.position', 'cpemgv.disabled'));$x46->where("va\154\x75\x65\x3c>\x54\122\x49M\050'') A\116\x44\x20(st\x6fr\x65_\x69d\x3d" . $x25 . ' OR  store_id=0)');$x46->order(array('position', 'value_id'));$x65 = $x44->fetchAll($x46);foreach ($x65 as $x66) {$x67[$x66['entity_id']]['src'][] = $x66['value'];$x67[$x66['entity_id']]['disabled'][] = $x66['disabled'];}if ($this->_debug) {echo "\x3cb\162>\074\142r\076-\x2d--\x2d\x2d\055-\055--\x2d\040\111\115\101\107\105\123 \x2d\055\055\055\x2d-----\055--\x2d--<\142\162\x3e";$xb9($x67);}$x68 = $x43->getTableName("\143at\141\x6co\147\x69\x6e\166e\156\164o\x72\171\137\x73\164\x6f\x63k\137\151\164e\155");$x69 = $x43->getTableName("\x63\x6f\162\145\137\x75r\154\x5f\162\145w\x72i\x74e");$x49 = $x43->getTableName('catalog_category_product');$x6a = $x43->getTableName('catalog_category_product_index');$x6b = $x43->getTableName('catalog_product_super_link');$x6c = $x43->getTableName('catalog_product_link');$x6d = $x43->getTableName('catalog_product_bundle_selection');$x6e = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x25);$x6e->addAttributeToFilter('status', 1);$x6e->addAttributeToFilter('type_id', array("\x69n" => "\x63o\156\146ig\x75\x72abl\145"));$x6e->addAttributeToFilter('visibility', array("\x6ein" => 1));$x6e->addAttributeToSelect($x4c);$x6e->getSelect()->joinLeft($x6b . ' AS cpsl', 'cpsl.parent_id=e.entity_id ', array('child_ids' => 'GROUP_CONCAT( DISTINCT cpsl.product_id)'));$x6e->getSelect()->joinLeft($x68 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x6e->getSelect()->joinLeft($x69 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x25, array('request_path' => 'request_path'));$x6e->getSelect()->joinLeft($x49 . ' AS categories', 'categories.product_id=e.entity_id');$x6e->getSelect()->joinLeft($x6a . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x25, array('categories_ids' => 'GROUP_CONCAT( DISTINCT categories_index.category_id)'));$x6e->getSelect()->group(array('cpsl.parent_id'));$x6f = array();foreach ($x6e as $x70) {foreach ($xa8("\054", $x70->getChildIds()) as $x71) {$x6f[$x71] = $x70;$x72[$x71]['categories_ids'] = $x70->getCategories_ids();$x72[$x71]['parent_id'] = $x70->getId();$x72[$x71]['parent_sku'] = $x70->getSku();$x72[$x71]['parent_request_path'] = $x70->getRequestPath();}}$this->configurable = $x6f;if ($this->_debug) {echo "\074\x62\162>\074b\162\x3e\x2d\055\055\055\055\x2d\055\055\x2d\055-\x2d\x20CONF\111G\x55\122A\x42\114\105S --\055-\055-\x2d\055\x2d\x2d---\055\055\055\074b\x72\076";echo $x6e->getSelect() . '<br><br>';$xb9($x72);}$x6e = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x25);$x6e->addAttributeToFilter('status', 1);$x6e->addAttributeToFilter('type_id', array("in" => "\x63\x6f\156\146\x69\x67\165\x72\x61\x62\154\x65"));$x6e->addAttributeToFilter('visibility', array("\156in" => 1));$x6e->getSelect()->joinLeft($x6b . ' AS cpsl', 'cpsl.parent_id=e.entity_id ');$x6e->getSelect()->joinLeft($x68 . ' AS stock', 'stock.product_id=cpsl.product_id', array('qty' => 'SUM(qty)'));$x6e->getSelect()->group(array('cpsl.parent_id'));$x73 = array();foreach ($x6e as $x74) {$x73[$x74->getId()] = $x74->getQty();}$this->configurableQty = $x73;if ($this->_debug) {echo "\074br\x3e\074\142\162\x3e-\055-\055-\055\055-\x2d---\x20\103O\x4e\106\111\107U\x52A\102\114\x45\x53\x20\x51T\x59\040\x2d-\055\055\x2d\x2d-\x2d--\055--\055\055\x2d\074\142\162\076";echo $x6e->getSelect() . '<br><br>';$xb9($x73);}$x6e = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x25);$x6e->addAttributeToFilter('status', 1);$x6e->addAttributeToFilter('type_id', array("\x69\x6e" => "group\145d"));$x6e->addAttributeToFilter('visibility', array("n\151\156" => 1));$x6e->addAttributeToSelect($x4c);$x6e->getSelect()->joinLeft($x6c . ' AS cpl', 'cpl.product_id=e.entity_id AND cpl.link_type_id=3', array('child_ids' => 'GROUP_CONCAT( DISTINCT cpl.linked_product_id)'));$x6e->getSelect()->joinLeft($x68 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x6e->getSelect()->joinLeft($x69 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x25, array('request_path' => 'request_path'));$x6e->getSelect()->joinLeft($x49 . ' AS categories', 'categories.product_id=e.entity_id');$x6e->getSelect()->joinLeft($x6a . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x25, array('categories_ids' => 'GROUP_CONCAT( DISTINCT categories_index.category_id)'));$x6e->getSelect()->group(array('cpl.product_id'));$x75 = array();foreach ($x6e as $x70) {foreach ($xa8("\054", $x70->getChildIds()) as $x71) {$x75[$x71] = $x70;$x76[$x71]['categories_ids'] = $x70->getCategories_ids();$x76[$x71]['parent_id'] = $x70->getId();$x76[$x71]['parent_sku'] = $x70->getSku();$x76[$x71]['parent_request_path'] = $x70->getRequestPath();}}$this->grouped = $x75;if ($this->_debug) {echo "<\x62r\076\x3c\142\162>\055\x2d\x2d\x2d\x2d\x2d--\055-\x2d- G\122\117UP\105\x44\040\x2d\x2d\x2d-\055\055--\x2d--\055\x2d\055\055\055<b\x72\076";echo $x6e->getSelect() . '<br><br>';$xb9($x76);}$x6e = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x25);$x6e->addAttributeToFilter('status', 1);$x6e->addAttributeToFilter('type_id', array("i\156" => "\142\165\x6e\144\x6c\x65"));$x6e->addAttributeToFilter('visibility', array("ni\x6e" => 1));$x6e->addAttributeToSelect($x4c);$x6e->getSelect()->joinLeft($x6d . ' AS cpbs', 'cpbs.parent_product_id=e.entity_id', array('child_ids' => 'GROUP_CONCAT( DISTINCT cpbs.product_id)'));$x6e->getSelect()->joinLeft($x68 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x6e->getSelect()->joinLeft($x69 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x25, array('request_path' => 'request_path'));$x6e->getSelect()->joinLeft($x49 . ' AS categories', 'categories.product_id=e.entity_id');$x6e->getSelect()->joinLeft($x6a . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x25, array('categories_ids' => 'GROUP_CONCAT( DISTINCT categories_index.category_id)'));$x6e->getSelect()->group(array('e.entity_id'));$x77 = array();foreach ($x6e as $x70) {foreach ($xa8("\x2c", $x70->getChildIds()) as $x71) {$x77[$x71] = $x70;$x78[$x71]['parent_id'] = $x70->getId();$x78[$x71]['parent_sku'] = $x70->getSku();$x78[$x71]['parent_request_path'] = $x70->getRequestPath();$x78[$x71]['categories_ids'] = $x70->getCategories_ids();}}$this->bundle = $x77;if ($this->_debug) {echo "\x3cb\162\076<b\x72\x3e-\055\x2d\x2d\055\055-\x2d-\055\055\x2d\x20\x42UND\x4cE\x20-\055\x2d\x2d---\x2d\x2d--\x2d\x2d\055\055\055\074\x62\x72\076";echo $x6e->getSelect() . '<br><br>';$xb9($x78);}$x79 = 0;$x6e = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x25);$x6e->addAttributeToFilter('status', 1);$x6e->addAttributeToFilter('type_id', array("\x69n" => $x36));$x6e->addAttributeToFilter('visibility', array("i\156" => $x37));$x7a = $x6e->$xa5();$x7b = $xbb($x7a / $this->_sqlSize) + 1;$x39 = '';while ($x79 < $x7b) {$x6e = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($x25);$x6e->addAttributeToFilter('status', 1);$x6e->addAttributeToFilter('type_id', array("\151\x6e" => $x36));$x6e->addAttributeToFilter('visibility', array("\151\x6e" => $x37));$x6e->addAttributeToSelect($x4c);$x7c = array("\x65\161" => "\075\040'\x25s'","n\145\161" => "\x21= '%\x73'","gt\x65q" => "\x3e\075\040'%s'","\x6ct\145q" => "\x3c\x3d '\045\163'","\x67\x74" => "\076\x20'\x25\x73'","\154t" => "\074\040'%s'","\x6ci\153\145" => "\154\x69\x6b\145 '\045\x73'","n\154\x69\153\145" => "not lik\145\x20'%\x73'","\156\165\154\154" => "\151s\x20\x6eul\x6c","\x6e\x6ftn\165l\154" => "\x69\x73 \x6eot\040\156\x75\x6c\154","\151n" => "\151\x6e\x20\x28%\x73)","\156\x69\x6e" => "n\157t\040\151\x6e(%s\051",);$x7d = '';$x1e = 0;foreach ($x38 as $x4e) {if ($x4e->checked) {if ($x4e->condition == 'in' || $x4e->condition == 'nin') {if ($x4e->code == 'qty' || $x4e->code == 'is_in_stock') {$x7e = $xa8(',', $x4e->value);$x4e->value = "'" . $xae($x7e, "'\x2c'") . "'";}else$x4e->value = $xa8(',', $x4e->value);}switch ($x4e->code) {case 'qty' :if ($x1e > 0)$x7d.=' AND ';$x7d.="\x20\161t\171\040" . $xbe($x7c[$x4e->condition], $x4e->value);$x1e++;break;case 'is_in_stock' :if ($x1e > 0)$x7d.=' AND ';$x7d.="\x20\151\x73_\x69n_\x73\164\x6fck\040" . $xbe($x7c[$x4e->condition], $x4e->value);$x1e++;break;default :$x6e->addFieldToFilter($x4e->code, array($x4e->condition => $x4e->value));break;}}};$x6e->getSelect()->joinLeft($x68 . ' AS stock', 'stock.product_id=e.entity_id', array('qty' => 'qty', 'is_in_stock' => 'is_in_stock'));$x6e->getSelect()->joinLeft($x69 . ' AS url', 'url.product_id=e.entity_id AND url.category_id IS NULL AND is_system=1 AND options<> "RP" AND url.store_id=' . $x25, array('request_path' => 'request_path'));$x6e->getSelect()->joinLeft($x49 . ' AS categories', 'categories.product_id=e.entity_id');$x6e->getSelect()->joinLeft($x6a . ' AS categories_index', 'categories_index.category_id=categories.category_id AND  categories_index.product_id=categories.product_id AND categories_index.store_id=' . $x25, array('categories_ids' => 'GROUP_CONCAT(categories_index.category_id)'));if (!empty($x7d))$x6e->getSelect()->where($x7d);$x6e->getSelect()->group(array('e.entity_id'));if ($this->_debug) {echo "<\x62r\x3e<b\162\x3e-\055\055\055--\055\x2d-\055\055\x2d S\x51L\x20\055-\x2d\x2d--\055---\055\x2d-\055\055\055\074\142\162\x3e";print($x6e->getSelect());}$x6e->getSelect()->limit($this->_sqlSize, ($this->_sqlSize * $x79));$x79++;$x7f = 1;foreach ($x6e as $x22) {if ($this->_debug) {echo "<\142\162\x3e\x3c\142\x72\076\x2d--\055--\055-\x2d\055\x2d\055\x20\x50\122\117D\125\x43\124\040\x5b \123\x4b\x55 \x2d\x3e\x20" . $x22->getSku() . "\x20|\x20\111\x44\040-\x3e " . $x22->getId() . "\x5d\055-\055\x2d\055-\055\055\x2d\055-\055\055\x2d\x2d<\142r\076";echo "\143\x61t\x65\x67orie\x73\040: " . $x22->getCategoriesIds() . ", \122o\157\164\x20\151d\072 " . $x2d . "\x3cb\162\076";foreach ($xa8(',', $x22->getCategoriesIds()) as $x1b => $x42) {echo $x42 . "\075>" . $x41[$x42]["\x70a\164\x68"] . "<\x62\x72\x3e";}}if (!$xaf('safe_mode')) {$xbd(60);}$x17 = $x2f;foreach ($x3b as $x1b => $x80) {$x1c = "";switch ($x80['pattern']) {case '{inc}' :$x1c = $x7f;break;case '{final_price}' :$x81 = $this->checkReference($x80['reference'], $x22);$x0d = Mage::getModel('catalog/product')->load($x81->getId())->getFinalPrice();(!isset($x80['options'][1])) ? $x12 = false : $x12 = $x80['options'][1];$x1c = $this->applyTax($x0d, $x2c, $x81->getTaxClassId(), $x12);(!isset($x80['options'][0])) ? $x0e = $x29 : $x0e = $x80['options'][0];$x1c = $this->applyCurrencyRate($x1c, $x0e);$x1c = $xb5($x1c, 2, '.', '');break;case '{normal_price}' :$x81 = $this->checkReference($x80['reference'], $x22);if ($x81->type_id == 'bundle')$x0d = $x81->price;else {$x0d = $x81->getPrice();}(!isset($x80['options'][1])) ? $x12 = false : $x12 = $x80['options'][1];$x1c = $this->applyTax($x0d, $x2c, $x81->getTaxClassId(), $x12);(!isset($x80['options'][0])) ? $x0e = $x29 : $x0e = $x80['options'][0];$x1c = $this->applyCurrencyRate($x1c, $x0e);$x1c = $xb5($x1c, 2, '.', '');break;case '{price}' :$x81 = $this->checkReference($x80['reference'], $x22);if ($x81->getSpecialFromDate() && !$x81->getSpecialToDate()) {if ($x81->getSpecialFromDate() <= $xa6("\x59-\155\055\x64\040\110\x3ai\072\163")) {if ($x81->type_id == "\142\165\156\144\x6ce") {if (($x81->price_type || (!$x81->price_type && $x81->special_price < $x81->price)) && $x81->special_price > 0) {if ($x81->price_type)$x0d = $xb5($x81->price * $x81->special_price / 100, 2, ".", "");else$x0d = $x81->special_price;}else {$x0d = $x81->price;}}else($x81->getSpecial_price() && $x81->getSpecial_price() < $x81->getPrice()) ? $x0d = $x81->getSpecialPrice() : $x0d = $x81->getPrice();}else {if ($x81->type_id == "bu\x6e\x64\154\145")$x0d = $x81->price;else {$x0d = $x81->getPrice();}}} elseif ($x81->getSpecialFromDate() && $x81->getSpecialToDate()) {if ($x81->getSpecialFromDate() <= $xa6("\131-\155-\x64 \x48:\151\072s") && $xa6("Y\x2d\x6d\x2d\144\x20\x48\072\x69\072\x73") < $x81->getSpecialToDate()) {if ($x81->type_id == "\x62\x75\156d\154\x65") {if (($x81->price_type || (!$x81->price_type && $x81->special_price < $x81->price)) && $x81->special_price > 0) {if ($x81->price_type)$x0d = $xb5($x81->price * $x81->special_price / 100, 2, ".", "");else {$x0d = $x81->special_price;}} else {$x0d = $x81->price;}} else {($x81->getSpecial_price() && $x81->getSpecial_price() < $x81->getPrice()) ? $x0d = $x81->getSpecialPrice() : $x0d = $x81->getPrice();}} else {if ($x81->type_id == "\x62\x75\156d\x6c\x65") {$x0d = $x81->price;} else {$x0d = $x81->getPrice();}}} else {if ($x81->type_id == "b\x75\156dl\145") {if (($x81->price_type || (!$x81->price_type && $x81->special_price < $x81->price)) && $x81->special_price > 0) {if ($x81->price_type) {$x0d = $xb5($x81->price * $x81->special_price / 100, 2, ".", "");} else {$x0d = $x81->special_price;}} else {$x0d = $x81->price;}} else {($x81->getSpecial_price() && $x81->getSpecial_price() < $x81->getPrice()) ? $x0d = $x81->getSpecialPrice() : $x0d = $x81->getPrice();}}(!isset($x80['options'][1])) ? $x12 = false : $x12 = $x80['options'][1];$x1c = $this->applyTax($x0d, $x2c, $x81->getTaxClassId(), $x12);(!isset($x80["o\160t\151\157\x6es"][0])) ? $x0e = $x29 : $x0e = $x80["\157\160t\x69\157\156\163"][0];$x1c = $this->applyCurrencyRate($x1c, $x0e);$x1c = $xb5($x1c, 2, "\x2e", "");;break;case "{i\x73\x5fsp\145c\151a\x6c\137\160ri\x63\145}" :$x81 = $this->checkReference($x80['reference'], $x22);(!isset($x80["\x6f\x70\164\151\157ns"][0])) ? $x82 = 1 : $x82 = $x80["\x6f\x70\x74i\x6f\156\163"][0];(!isset($x80["op\x74\x69\157\x6e\x73"][1])) ? $x83 = 0 : $x83 = $x80["op\164\x69\x6f\156s"][1];if ($x81->getSpecialFromDate() && !$x81->getSpecialToDate()) {if ($x81->getSpecialFromDate() <= $xa6("\x59\055m-\x64\040H:i\072s")) {if ($x81->type_id == "\142u\x6e\144le")(($x81->price_type || (!$x81->price_type && $x81->special_price < $x81->price)) && $x81->special_price > 0 ) ? $x1c = $x82 : $x1c = $x83;else {($x81->getSpecial_price() && $x81->getSpecial_price() < $x81->getPrice()) ? $x1c = $x82 : $x1c = $x83;}} else {if ($x81->type_id == "b\x75\x6e\x64\x6ce") {$x1c = $x83;} else {$x1c = $x83;}}} elseif ($x81->getSpecialFromDate() && $x81->getSpecialToDate()) {if ($x81->getSpecialFromDate() <= $xa6("\x59-m\x2d\144\x20H\x3a\151\072\163") && $xa6("\x59\055m\055\144 \110:i\x3a\x73") < $x81->getSpecialToDate()) {if ($x81->type_id == "b\x75\x6e\144\154\145") {(($x81->price_type || (!$x81->price_type && $x81->special_price < $x81->price)) && $x81->special_price > 0 ) ? $x1c = $x82 : $x1c = $x83;} else {($x81->getSpecial_price() && $x81->getSpecial_price() < $x81->getPrice()) ? $x1c = $x82 : $x1c = $x83;}} else {if ($x81->type_id == "\x62u\x6ed\x6ce") {$x1c = $x83;} else {$x1c = $x83;}}} else {if ($x81->type_id == "\x62\165\x6e\x64\154\x65") {(($x81->price_type || (!$x81->price_type && $x81->special_price < $x81->price)) && $x81->special_price > 0 ) ? $x1c = $x82 : $x1c = $x83;} else {($x81->getSpecial_price() && $x81->getSpecial_price() < $x81->getPrice()) ? $x1c = $x82 : $x1c = $x83;}}break;case "{\x73\x70\145c\x69\141\154\x5f\160\162\x69\143\x65\175" :$x81 = $this->checkReference($x80['reference'], $x22);if ($x81->type_id == 'bundle') {if ($x81->price_type) {$x0d = $xb5($x81->price * $x81->special_price / 100, 2, ".", "");} else {$x0d = $x81->special_price;}} else {$x0d = $x81->getSpecial_price();}(!isset($x80['options'][1])) ? $x12 = false : $x12 = $x80['options'][1];if ($x0d > 0) {$x1c = $this->applyTax($x0d, $x2c, $x81->getTaxClassId(), $x12);(!isset($x80['options'][0])) ? $x0e = $x29 : $x0e = $x80['options'][0];$x1c = $this->applyCurrencyRate($x1c, $x0e);$x1c = $xb5($x1c, 2, '.', '');;} else {$x1c = "";}break;case "\x7bG\x3a\x53A\114\x45\x5f\120\x52IC\105\x7d" :$x81 = $this->checkReference($x80['reference'], $x22);$x84 = $xbf(' ', 'T', $x81->getSpecialFromDate());$x85 = $xbf(' ', 'T', $x81->getSpecialToDate());if ($x81->type_id == 'bundle' && $x81->special_price) {if ($x81->price_type) {$x0d = $xb5($x81->price * $x81->special_price / 100, 2, ".", "");} else {$x0d = $x81->special_price;}} else {$x0d = $x81->getSpecial_price();}(!isset($x80['options'][1])) ? $x12 = false : $x12 = $x80['options'][1];if ($x0d > 0) {$x0d = $this->applyTax($x0d, $x2c, $x81->getTaxClassId(), $x12);(!isset($x80['options'][0])) ? $x0e = $x29 : $x0e = $x80['options'][0];$x0d = $this->applyCurrencyRate($x0d, $x0e);$x0d = $xb5($x0d, 2, '.', '');;}if ($x0d > 0) {$x1c = "\074\147\072\163al\x65\x5f\x70\x72\x69\143\x65>\x3c\x21[\x43DATA\x5b" . $x0d . "]\135\076\x3c/\147\072\x73a\x6ce\x5f\160\162ic\145\x3e\n";}if ($x0d > 0 && $x85) {$x1c.="\074g\072s\141l\x65_p\162\151c\x65\x5f\145f\146ec\164ive_\144\141t\145\x3e<![\x43D\x41T\101\133" . $x84 . "\x5a\057" . $x85 . "\132\x5d\x5d>\074/\x67\x3a\x73\x61\154\145_\160\162\151\x63\x65_\x65f\x66\145c\164\x69v\x65\x5f\144at\145\x3e";}break;case "\x7bim\141ge\175" :$x81 = $this->checkReference($x80['reference'], $x22);$x86 = $x81->getImage();if (!isset($x80['options'][0]) || $x80['options'][0] == 0) {if ($x81->getImage() && $x81->getImage() != 'no_selection') {$x87 = 'catalog/product/' . $x81->getImage();$x1c = $x2b . $xbf('//', '/', $x87);} else {$x1c = $x2b . '/catalog/product/placeholder/' . $x28;}} elseif (isset($x67[$x81->getId()]['src'][$x80['options'][0] - 1]) && $x80['options'][0] > 0) {if ($x67[$x81->getId()]['src'][$x80['options'][0] - 1] != $x86) {$x87 = 'catalog/product/' . $x67[$x81->getId()]['src'][$x80['options'][0] - 1];$x1c = $x2b . $xbf('//', '/', $x87);}}break;case "\173\x47:\111\115AGE\137LIN\x4b\175" :$x81 = $this->checkReference($x80['reference'], $x22);$x86 = $x81->getImage();$x88 = array($x81->getSmall_image(), $x81->getThumbnail());$x89 = '';$x8a = 0;if ($x81->getImage() && $x81->getImage() != 'no_selection') {$x87 = 'catalog/product/' . $x81->getImage();$x1c = $x2b . $xbf('//', '/', $x87);$x89.="\x3cg\072\151\155\141\x67\145\137l\x69n\x6b\x3e\074\041\x5b\x43\x44A\124A\x5b" . $x1c . "\135\135\076\074\057\x67\x3ai\155\x61ge\x5fli\x6e\153>\n";$x8a++;}$x8b = 0;while (isset($x67[$x81->getId()]['src'][$x8b]) && $x8a < 10) {if ($x67[$x81->getId()]['src'][$x8b] != $x86) {if ($xad($x67[$x81->getId()]['src'][$x8b], $x88) || $x67[$x81->getId()]['disabled'][$x8b] != 1) {$x87 = 'catalog/product/' . $x67[$x81->getId()]['src'][$x8b];$x1c = $x2b . $xbf('//', '/', $x87);$x89.="\074\147:\x61\x64\144i\x74\151o\156\x61l\137im\x61g\145_li\156k\x3e\074\x21[\x43\x44\101\124\101[" . $x1c . "\135\135>\074/\147\x3a\141\144\x64\x69\164\151\157\156\x61l\137\x69m\x61\x67e\x5fl\x69\156k\076\n";$x8a++;}}$x8b++;}$x1c = $x89;break;case "\173url}" :$x81 = $this->checkReference($x80['reference'], $x22);if ($x81->getRequest_path()) {$x1c = $x2a . $x23 . $x81->getRequest_path();} else {$x1c = $x81->getProductUrl();}break;case "{\x75\x72i}" :$x81 = $this->checkReference($x80['reference'], $x22);if ($x81->getRequest_path()) {$x1c = $x81->getRequest_path();} else {$x1c = $xbf($x2a, '', $x81->getProductUrl());}break;case '{is_in_stock}' :$x81 = $this->checkReference($x80['reference'], $x22);(!isset($x80['options'][0])) ? $x82 = 1 : $x82 = $x80['options'][0];(!isset($x80['options'][1])) ? $x83 = 0 : $x83 = $x80['options'][1];($x81->getIs_in_stock() > 0) ? $x1c = $x82 : $x1c = $x83;break;case '{stock_status}' :$x81 = $this->checkReference($x80['reference'], $x22);($x81->getIs_in_stock() > 0) ? $x1c = 'in stock' : $x1c = 'out of stock';break;case '{qty}' :$x81 = $this->checkReference($x80['reference'], $x22);(!isset($x80['options'][0])) ? $x8c = 0 : $x8c = $x80['options'][0];if ($x22->type_id == "\143\x6f\x6e\146i\147\x75\x72a\142\154\x65") {$x1c = $x73[$x22->getId()];$x1c = $xb5($x1c, $x8c, '.', '');} else if ($x80['reference'] == "\x63o\156\x66\x69g\x75\162\x61b\154e") {$x1c = $xb5($x73[$x81->getId()], $x8c, '.', '');} else {$x1c = $xb5($x81->getQty(), $x8c, '.', '');}break;case "{\x63a\164\x65\147\x6fries}" :$x81 = $this->checkReference($x80['reference'], $x22);(!isset($x80['options'][0]) || !$x80['options'][0] || $x80['options'][0] == 'INF') ? $x8d = INF : $x8d = $x80['options'][0];(!isset($x80['options'][1])) ? $x8e = 1 : $x8e = $x80['options'][1];(!isset($x80['options'][2]) || !$x80['options'][2] || $x80['options'][2] == 'INF') ? $x8f = INF : $x8f = $x80['options'][2];$x90 = 0;$x1c = '';$x91 = '';foreach ($xa8(',', $x81->getCategoriesIds()) as $x1b => $x42) {if (isset($x41[$x42]) && $x90 < $x8d && ($xad($x41[$x42]["\160\x61\164\x68"], $x33) || $x33[0] == "\052")) {$x92 = 0;$x93 = $xa8('/', $x41[$x42]["\x70a\164h"]);if ($xad($x2d, $x93)) {$x94 = "";if ($x90 > 0) {$x91 = "\054";}foreach ($x93 as $x95) {if (isset($x41[$x95])) {if ($x41[$x95]['level'] > $x8e && $x92 < $x8f) {if ($x92 > 0) {$x94.=' > ';}$x94.=($x41[$x95]['name']);$x92++;}}}$x96 = "";if (!empty($x94)) {$x1c.=$x91 . $x94 . $x96;$x90++;}}}};break;case "\x7b\107\x3a\x50RO\104\125\103\124\137T\x59\x50\105\175" :$x81 = $this->checkReference($x80['reference'], $x22);(!isset($x80['options'][0]) || !$x80['options'][0] || $x80['options'][0] == 'INF') ? $x8d = INF : $x8d = $x80['options'][0];(!isset($x80['options'][1])) ? $x8e = 1 : $x8e = $x80['options'][1];(!isset($x80['options'][2]) || !$x80['options'][2] || $x80['options'][2] == 'INF') ? $x8f = INF : $x8f = $x80['options'][2];$x90 = 0;$x1c = '';foreach ($xa8(',', $x81->getCategoriesIds()) as $x1b => $x42) {if (isset($x41[$x42]) && $x90 < $x8d && ($xad($x41[$x42]["\160\141\164\150"], $x33) || $x33[0] == "\x2a")) {$x92 = 0;$x93 = $xa8('/', $x41[$x42]["\160\141\164\150"]);if ($xad($x2d, $x93)) {$x94 = '';$x91 = '<g:product_type><![CDATA[';foreach ($x93 as $x95) {if (isset($x41[$x95])) {if ($x41[$x95]['level'] > $x8e && $x92 < $x8f) {if ($x92 > 0) {$x94.=' > ';}$x94.=($x41[$x95]['name']);$x92++;}}}$x96 = "\135\135\x3e\074/g\x3a\x70\162od\165\143t\137ty\x70\x65\076\n";if (!empty($x94)) {$x1c.=$x91 . $x94 . $x96;$x90++;}}}};break;case "\x7bG\x3aG\117\x4f\x47\114E_\x50\122\x4f\x44\125C\124_C\101\x54\x45\x47O\122\131}" :(isset($x80["o\160\x74\x69\157n\x73"][0])) ? $x97 = $x80["\157\x70t\x69\x6f\156s"][0] : $x97 = 0;$x1c = "";$x98 = 0;$x81 = $this->checkReference($x80['reference'], $x22);foreach ($xa8(',', $x81->getCategoriesIds()) as $x1b => $x42) {if (isset($x41[$x42]["\x70\x61\164\150"]) && isset($x34[$x41[$x42]["\x70a\164h"]])) {if ($x98 == $x97) {$x1c.="\x3c\147\x3ag\157\157g\154\x65\x5fp\162\x6fd\x75\x63\164\x5f\143\141t\145\x67ory\x3e\x3c!\x5b\103\x44\x41\x54A[" . $x34[$x41[$x42]["\160\x61\164h"]] . "\135]\x3e<\057g\072\x67\x6fog\154\x65_\160ro\144u\x63t_ca\x74\x65\x67\x6f\162y>\n";break;}$x98++;}}break;case "{\143\x61\x74egor\x79_\155\141\x70\x70i\x6eg}" :(isset($x80["\157\x70tio\156\163"][0])) ? $x97 = $x80["\157\x70ti\157\x6e\163"][0] : $x97 = 0;$x1c = "";$x81 = $this->checkReference($x80['reference'], $x22);$x98 = 0;foreach ($xa8(',', $x81->getCategoriesIds()) as $x1b => $x42) {if (isset($x34[$x41[$x42]["\160at\x68"]])) {if ($x98 == $x97) {$x1c.=$x34[$x41[$x42]["\160\x61\164h"]];break;}$x98++;}}break;case "\x7bre\166\151\145\167_\x63\x6f\165nt}":$x81 = $this->checkReference($x80['reference'], $x22);$x1c = "";(isset($x80["\x6f\x70\x74\151\x6f\x6es"][0]) && $x80["o\160\x74i\x6fn\x73"][0] == "*" ) ? $x99 = 0 : $x99 = $x25;if (isset($x61[$x81->getId()][$x99]["\x63o\165\156\164"])) {$x9a = $x61[$x81->getId()][$x99]["\x63\157u\156\164"];if (isset($x9a)) {$x1c.=$x9a;}}break;case "\173\162\145\x76\151ew\137a\166\x65ra\147e\x7d":$x81 = $this->checkReference($x80['reference'], $x22);$x1c = "";(isset($x80["\x6f\x70ti\x6fn\163"][0]) && $x80["o\160\164io\156\163"][0] == "\052" ) ? $x99 = 0 : $x99 = $x25;(!isset($x80["\x6f\x70\x74\151\x6fn\x73"][1]) || !$x80["o\x70\164\x69o\156s"][1]) ? $x9b = 5 : $x9b = $x80["\157p\x74\151\157\156s"][1];if (isset($x61[$x81->getId()][$x99]["\163\x63o\x72\145"])) {$x9c = $xb5($x61[$x81->getId()][$x99]["\163c\x6fr\145"] * $x9b / 100, 2, "\056", "");if (isset($x9c)) {$x1c.=$x9c;}}break;case "\x7bG\072PRO\x44\x55\x43\124\137\122\105V\x49\x45W\x7d" :$x81 = $this->checkReference($x80['reference'], $x22);(isset($x80["\x6f\x70t\x69\x6fn\x73"][0]) && $x80["\157\160\164\151o\x6es"][0] == "*" ) ? $x99 = 0 : $x99 = $x25;(!isset($x80["\x6f\160t\151\x6f\156s"][1]) || !$x80["o\160t\x69\157\156\163"][1]) ? $x9b = 5 : $x9b = $x80["\157\160\x74\151\157\156\163"][1];$x1c = "";if (isset($x61[$x81->getId()][$x99]["\x63\x6f\x75\x6e\164"])) {$x9a = $x61[$x81->getId()][$x99]["\x63\x6f\165\x6e\x74"];$x9c = $xb5($x61[$x81->getId()][$x99]["scor\145"] * $x9b / 100, 2, ".", "");}if (isset($x9c)) {$x1c.="\074\147:\x70\x72\x6f\144u\x63t_\x72evie\167_\141ver\x61\x67\145\x3e\074![C\x44ATA\x5b" . $x9c . "\135\x5d\076\x3c\x2fg:\x70\162\x6f\144u\x63t_\162\145\x76iew\x5fa\166\x65r\141g\145>\n";}if (isset($x9a) && $x9a > 0) {$x1c.="\x3c\x67:\160\x72\x6f\x64\165\x63t_\162\x65vi\x65\x77\x5fc\157\x75\156\164\x3e<\x21\133\103D\x41T\x41\133" . $x9a . "\x5d\x5d>\074\057g\072\x70r\157d\x75\x63\164_rev\x69\x65\167\137\143\157u\156t\076\n";}break;case "\173\107:\x49\x54\105\x4d_GR\x4f\x55\x50_\111\x44}" :if (isset($this->configurable[$x22->getId()])) {$x81 = $this->checkReference('configurable', $x22);$x1c = "\x3cg:it\x65m\137\147\x72o\165\160_id\x3e\x3c\041\x5b\103\104\x41\124A\133" . $x81->getSku() . "\x5d\135\x3e<\x2f\x67\072\x69\x74\145\x6d\137\x67\x72\157\x75\160_\151d>";}break;default :$x81 = $this->checkReference($x80['reference'], $x22);if ($xad($x80['name'], $x4c)) {if ($xad($x4d[$x80['name']], array('select', 'multiselect'))) {eval('$x9d =($x81->' . $x80['methodName'] . ")\073");$x9e = $xa8(',', $x9d);if ($xa5($x9e) > 1) {$x1c = array();foreach ($x9e as $x9f) {if (isset($x52[$x9f][$x25]))$x1c[] = $x52[$x9f][$x25];else {if (isset($x52[$x9f][0]))$x1c[] = $x52[$x9f][0];}}}else {if (isset($x52[$x9e[0]][$x25])) {$x1c = $x52[$x9e[0]][$x25];} else {if (isset($x52[$x9e[0]][0]))$x1c = $x52[$x9e[0]][0];}}} else {eval('$x1c =($x81->' . $x80['methodName'] . "\051;");}}if ($xad(@$x4a[$x80['name']], $x4a)) {$x1c = $x4a[$x80['name']];}$xa0 = 0;if ($xa5($x80['options']) > 0) {while (isset($x80['options'][$xa0])) {switch ($x80['options'][$xa0]) {case "\163\165\142str" :if (isset($x80['options'][$xa0 + 1]) && $xc0($x1c) > $x80['options'][$xa0 + 1]) {$x1c = $xc2($x1c, 0, $x80['options'][$xa0 + 1] - 3);$xa1 = $xc3($x1c, "\x20");$x1c = $xc2($x1c, 0, $xa1) . $x80['options'][$xa0 + 2];}$xa0++;$xa0++;break;case "\x68\x74\155le\156\x74i\x74\x69e\x73" :$x1c = $xaa(($x1c));break;case "\x73\164\162i\160_\x74\141\x67\x73" :$xa2 = "\x20";$x1c = $xba('!\<br /\>!isU', $xa2, $x1c);$x1c = $xba('!\<br/\>!isU', $xa2, $x1c);$x1c = $xba('!\<br>!isU', $xa2, $x1c);$x1c = $xc1($x1c);break;case "\151m\160\154\x6f\x64e" :$x1c = ($xb0($x1c)) ? $xae($x80['options'][$xa0 + 1], $x1c) : $x1c;$xa0++;break;case "\x66\154\x6f\x61\164" :$x1c = $xb5($x1c, $x80['options'][$xa0 + 1], '.', '');$xa0++;break;case "\x68t\x6d\x6c\137\x65\x6e\x74\x69\164\x79\x5fde\143o\x64\x65" :$x1c = $xab($x1c, ENT_QUOTES, 'UTF-8');break;case "\x69n\154i\156\145":$x1c = $xba('/(\r\n|\n|\r|\r\n)/s', '', $x1c);break;case "\163t\x72\x74\157\x6co\167er":$x1c = $xb3($x1c, "UT\x468");break;case "\163\164\162\x74\157\x75\x70\x70er":$x1c = $xb4($x1c, "\125\124\106\070");break;default :eval('$x1c=' . $x80['options'][$xa0] . '($x1c);');break;}$xa0++;}}break;}$x1c = $xbf(array("\x3c", "\x3e"), array("\x7b(\133", "\x5d)\x7d"), $x1c);$x17 = $xbf($x80['fullpattern'], $x1c, $x17);}$x17 = $this->execPhpScript($x17, $x22);$x17 = $this->encode($x17);$x17 = $this->xmlEncloseData($x17);$x17 = $xbf(array("\x7b(\x5b", "])\x7d"), array("\x3c", "\076"), $x17);if ($x33[0] != '*') {$x92 = 0;foreach ($xa8("\x2c", $x22->getCategoriesIds()) as $x1b => $x42) {if (isset($x41[$x42])) {if ($xad($x41[$x42]['path'], $x33)) {$x92++;}}};if ($x92 < 1) {$x17 = '';}}if (!empty($x17)) {$x39.=("\x3c\x69\x74e\x6d\076");$x39.="\n" . $x17 . "\n";$x39.=("<\057\151te\x6d>" . "\n");$x7f++;}if ($this->_display) {$x3a.=$x39;$x39 = '';} else {if ($x7f % 10 == 0) {$x0b->streamWrite($x39);unset($x39);$x39 = '';}}if ($this->_limit && $x7f > $this->_limit) {break 2;}}}$x39.=('</channel>' . "\n");$x39.=('</rss>');if (!$this->_display) {$x0b->streamWrite($x39);}unset($x6e);$x3a.=$x39;if ($this->_display && !$this->_debug) {$xa3 = "\x3cp\162\x65\040\156\141\x6de='c\157\144\145'\040\143\154\141\163s\x3d'x\x6dl'>" . $xaa($x3a) . "\074/\160re\076";return("\x0d\x0a\040\x20\040\x20	\011<\x68t\155\154\076\015\x0a \x20\040\040\x09	\x3c\x68e\141d\x3e\x0d\x0a \040 \040\011\x09\074t\151t\x6c\x65\076" . $this->getFeedName() . "<\057\x74\x69\x74\154e>\x0d\012\040\040\x20 \011\011\x09\074\154\151\x6ek\x20t\171\x70e='\164e\170t/css'\x20\162e\154\075'\x73\x74\x79\x6ce\163h\145\x65\164'\x20\150r\x65f='" . $x2a . "s\x6b\151\156\x2fa\144\x6d\x69\x6e\150\164m\154\x2f\144efau\x6c\x74\x2f\144\x65f\141\165\154\164\x2f\x53y\156\x74\141xH\x69g\x68l\x69\147\150\164er\x2f\143\163\x73\057S\x79nta\170\110\x69\147\150\x6cigh\164e\162.\x63\163s'\x3e\x3c\057\x6ci\x6e\153>
\x0a\x09\011\011<\163cr\x69\x70\164\x20\x6c\x61\x6e\147\x75\x61\147\x65\x3d'\x6aa\166\141\x73\x63r\151\x70\x74' \x73\x72c='" . $x2a . "\163k\151\156\057\141\144\155\151\x6e\150\164m\x6c/\x64\x65\146\141u\154t\x2fd\145fau\x6ct/\123\x79\x6e\x74\141\170Hi\147\150l\x69\x67\x68\x74\x65\x72\x2f\152\163\x2f\x73hC\x6f\162\x65\x2e\152\163'>\074\057\x73\143r\x69p\x74\076\x0d\012\011\011	\074\x73\x63rip\164\x20\154\x61\x6e\x67ua\147\x65\x3d'\x6a\141\x76\141\163\x63\x72\x69p\164' s\162\143\075'" . $x2a . "\x73\153\x69n/a\x64\155\x69\x6e\x68\x74\x6dl\057\x64\145\146aul\x74\057d\x65\146\141\x75\154\x74/\x53\x79\x6e\x74a\x78\110\151\x67\x68li\x67\x68\164\145\x72\057j\163\057\x73\150B\x72\165\x73\x68X\x6d\154.j\x73'>\074\x2fs\143\162\151\160\x74>\x0d
\040   \011	\015\012	\x09	\x3c/he\141d\x3e
\012\011\011\011\x3c\142\157\144\171\x3e
\012\x09	\011" . $xa3 . "
\x0a	\x09\x09\074s\143\x72i\160t\x20l\x61\156\147u\x61\x67e='ja\x76\141sc\x72i\x70\x74'\x3e\x0d
\x09\x09	\x0d\x0a\011\x09	\x64\x70\x2e\123\x79\156t\141\x78\x48\151\147\150\x6c\x69\x67h\x74\x65r.H\151\147\150l\x69\x67\x68\164\101l\154\050'c\157\x64\145',\x66\141\154\163e,fa\154\163e\x2c\146al\x73e,\146\141lse\x29;\015\x0a\x09\011\011\074\057\163\143\x72\x69\160t>\015\x0a\011\011\011\x3c\x2f\142o\x64y\x3e
\x0a\011\011	\074\057\x68\x74ml\076");} elseif ($this->_debug) {echo "\x3c\142\x72\076\x3c\142\x72>\x2d\055\x2d\x2d\055\x2d-\055\055\x2d-\x2d X\x4dL\x20\117U\124\120\125\x54 \x2d\x2d\x2d-\x2d--\055\x2d\055-\x2d-\055\x2d\055<br\076";$xa3 = "\074\160re>" . $xac($x3a) . "<\x2fpr\145\076";return $xa3;} else {$x0b->streamClose();$this->setGoogleshopping_time(Mage::getSingleton('core/date')->gmtDate('Y-m-d H:i:s'));$this->save();}return $this;
    }

}

