<?php/** Copyright (c) 2014 www.magebuzz.com*/class Magebuzz_Multipleorderemail_Model_Multipleorderemailrule extends Mage_SalesRule_Model_Rule{  protected $_eventPrefix = 'multipleorderemail_rule';  public function _construct()  {    parent::_construct();    $this->_init('multipleorderemail/multipleorderemailrule', 'rule_id');  }  public function getActiveShippingMethods()  {    $activeCarriers = Mage::getSingleton('shipping/config')->getActiveCarriers();    foreach ($activeCarriers as $carrierCode => $carrierModel) {      $options = array();      if ($carrierMethods = $carrierModel->getAllowedMethods()) {        foreach ($carrierMethods as $methodCode => $method) {          $code = $carrierCode . '_' . $methodCode;          $options[] = array('value' => $code, 'label' => $method);        }        $carrierTitle = Mage::getStoreConfig('carriers/' . $carrierCode . '/title');      }      if ($options) {        $methods[] = array('value' => $options, 'label' => $carrierTitle);      }    }    return $methods;  }  public function getActivePaymentMothods()  {    $payments = Mage::getSingleton('payment/config')->getActiveMethods();    foreach ($payments as $paymentCode => $paymentModel) {      $paymentTitle = Mage::getStoreConfig('payment/' . $paymentCode . '/title');      $methods[$paymentCode] = array(        'label' => $paymentTitle,        'value' => $paymentCode,      );    }    return $methods;  }}